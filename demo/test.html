<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MaxRectsBinPack demo</title>
    <style>
        img{
            display: none;
        }
    </style>
</head>
<body>
    <canvas id="texture"></canvas>
    <img id="anim1" src="http://06wj.github.io/flash2animation/demo/anim1.png">
    <img id="anim2" src="http://06wj.github.io/flash2animation/demo/anim2.png">
    <script src="../src/MaxRectsBinPack.js"></script>
    <script src="./data.js"></script>
    <script>
        var canvas = document.querySelector("#texture");
        var ctx = canvas.getContext("2d");
        var textureWidth = 300;
        var textureHeight = 300;
        canvas.width = textureWidth;
        canvas.height = textureHeight;

        //create rects
        var rects = [];
        ["anim1", "anim2"].forEach(function(name, i){
            var data = window[name];
            for(var i in data){
                var t = data[i];
                rects.push({
                    width:t.w,
                    height:t.h,
                    imgName:name,
                    imgX:t.x,
                    imgY:t.y
                });
            }
        });

        var pack = new MaxRectsBinPack(textureWidth, textureHeight, false);
        var result = pack.insert2(rects, 0);

        var imgs = {
            anim1:document.querySelector("#anim1"),
            anim2:document.querySelector("#anim2")
        };

        //draw rects
        window.onload = function(){
            result.forEach(function(rect){
                ctx.drawImage(imgs[rect.imgName], rect.imgX, rect.imgY, rect.width, rect.height, rect.x, rect.y, rect.width, rect.height);
            });
        }
    </script>
</body>
</html>